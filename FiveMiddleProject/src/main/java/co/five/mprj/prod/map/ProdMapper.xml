<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.five.mprj.prod.map.ProdMapper">
	<select id="prodSelectList" resultType="co.five.mprj.prod.service.ProdVO">
		SELECT * FROM PRODUCT ORDER BY PRODUCT_NUM DESC
	</select>
	
	<select id="prodSelect" resultType="co.five.mprj.prod.service.ProdVO">
		SELECT * FROM PRODUCT WHERE PRODUCT_NUM = #{productNum}
	</select>
	
	<insert id="prodInsert" parameterType="co.five.mprj.prod.service.ProdVO">
		<selectKey keyProperty="productNum" resultType="int" order="BEFORE">
			SELECT 
				CASE WHEN MAX(PRODUCT_NUM) IS NULL THEN 1 ELSE MAX(PRODUCT_NUM) + 1 END AS PRODUCTNUM
			FROM PRODUCT
		</selectKey>
		INSERT INTO PRODUCT
		VALUES(#{productNum},#{productName},#{productExpalin},#{productTrainer},#{productPrice},
				,#{productSubject},#{productDate},#{productImgUrl},#{productThumbNailUrl},#{productCategory},#{productYoutubeUrl})
	</insert>
	
	<update id="prodUpdate" parameterType="co.five.mprj.prod.service.ProdVO">
			UPDATE PRODUCT
			<set>
			<if test=" != null"> = #{},</if>
			</set>
			WHERE PRODUCT_NUM = #{productNum}
	</update>
	
	<delete id="prodDelete" parameterType="co.five.mprj.prod.service.ProdVO">
		DELETE FROM PRODUCT WHERE PRODUCT_NUM = #{productNum}
	</delete>

</mapper>
	